#include "map.h"


map::map(){
    wall = Texture::NewTexture("image/wall.png");
    blank = Texture::NewTexture("image/blank.png");
    item = Texture::NewTexture("image/item.jpg");
    cherri = Texture::NewTexture("image/cherri.jpg");
    destR.x = destR.y = 0;
    destR.w = 40;
    destR.h = 40;
}
map::~map(){}
/*
int arr[20][30] = {   {1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1},
                      {1,2,2,2,2,2,2,2,2,2,1,2,2,2,2,2,2,2,2,1,2,2,2,2,2,2,2,2,2,1},
                      {1,2,1,1,1,1,1,2,2,2,1,2,2,2,1,1,2,2,2,1,2,2,2,1,1,1,1,1,2,1},
                      {1,2,1,2,2,2,2,2,2,2,1,2,2,1,1,1,1,2,2,1,2,2,2,2,2,2,2,1,2,1},
                      {1,2,1,2,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,2,1,2,1},
                      {1,2,1,2,1,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,1,2,1,2,1},
                      {1,2,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1},
                      {1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1},
                      {1,2,2,2,1,1,1,1,1,2,2,2,1,1,0,0,1,1,2,2,2,1,1,1,1,1,2,2,2,1},
                      {1,2,2,2,2,2,2,2,1,2,2,2,1,0,0,0,0,1,2,2,2,1,2,2,2,2,2,2,2,1},
                      {1,2,2,2,1,1,1,2,1,2,2,2,1,0,0,0,0,1,2,2,2,1,2,1,1,1,2,2,2,1},
                      {1,2,2,2,1,1,1,2,1,2,2,2,1,1,1,1,1,1,2,2,2,1,2,1,1,1,2,2,2,1},
                      {1,2,2,2,2,2,2,2,1,2,2,2,2,2,2,2,2,2,2,2,2,1,2,2,2,2,2,2,2,1},
                      {1,2,1,2,2,2,1,1,1,2,2,1,1,2,2,2,2,1,1,2,2,1,1,1,2,2,2,1,2,1},
                      {1,2,1,2,1,2,2,2,2,2,2,1,1,2,2,2,2,1,1,2,2,2,2,2,2,1,2,1,2,1},
                      {1,2,1,2,1,1,2,2,2,1,2,1,1,2,1,1,2,1,1,2,1,2,2,2,1,1,2,1,2,1},
                      {1,2,1,2,2,2,2,2,2,1,2,2,2,2,1,1,2,2,2,2,1,2,2,2,2,2,2,1,2,1},
                      {1,2,1,1,1,1,1,2,2,1,1,1,1,1,1,1,1,1,1,1,1,2,2,1,1,1,1,1,2,1},
                      {1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1},
                      {1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1}
                      };
*/


void map::create_map(){
    std::ifstream file;
    file.open("map.txt");
    for(int i = 0; i < 20; i++){
        for(int j = 0; j < 30; j++){
            file >> m[i][j];
        }
    }
    file.close();
}

bool map::moveable(int x, int y){
    int j = x/40, i = y/40;
    if(m[i][j] == 1){
        return false;
    }
    return true;
}

void map::update_map(int x, int y){
    int j = x/40, i = y/40;
    if(m[i][j] == 2 or m[i][j] == 3){
        m[i][j] = 0;
    }

}

void map::loadmap(){

    for(int i = 0; i < 20 ; i++){
        for(int j = 0; j < 30; j++){
            destR.x = 40*j;
            destR.y = 40*i;
            if(m[i][j] == 0){
                SDL_RenderCopy(Game::renderer, blank, NULL, &destR);
            }else if(m[i][j] == 1){
                SDL_RenderCopy(Game::renderer, wall, NULL, &destR);
            }else if(m[i][j] == 3){
                SDL_RenderCopy(Game::renderer, cherri, NULL, &destR);
            }else{
                SDL_RenderCopy(Game::renderer, item, NULL, &destR);
            }

        }
    }
}


